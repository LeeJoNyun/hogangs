@use './../utils' as *;

:root {
    --duration: 0.5s;
}

#grooming_visual {
    margin-top: 84px;
    width: 100%;
    height: 1020px;
    background: url('/grooming/MainVisual.png') no-repeat center/cover;
    position: relative;
    .headline {
        position: absolute;
        top: 377px;
        right: 260px;
        color: #fefefe;
        text-align: right;
        font-family: Paperlogy;
        font-size: 80px;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        letter-spacing: 0.8px;
        overflow: visible;
        .color {
            color: #4a9f99;
        }
    }
    .sub {
        position: absolute;
        top: 487px;
        right: 260px;
        width: 560px;
        height: 42px;
        background: #52c1ba;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fefefe;
        font-family: Pretendard;
        font-size: 22px;
        font-style: normal;
        font-weight: 600;
        line-height: normal;
    }
}

/* ================================
   Splitting.js가 만들어주는 .char 애니메이션
================================ */

/* 모든 글자 기본 스타일 */
.splitting .char {
    visibility: hidden;

    &::before {
        visibility: visible;
        animation: inherit;
        animation-name: char-rotate;
        animation-duration: calc(var(--duration) * 1.1);
    }

    &:first-child::before {
        animation-name: first-char-rotate;
        animation-duration: inherit;
    }
}

/* 글자 하나씩 등장 */
.char {
    animation-name: char-transform;
    animation-duration: var(--duration);
    animation-fill-mode: both;

    /* 마지막 글자부터 순차적으로 */
    animation-delay: calc(var(--duration) + 0.05s * (var(--char-total) - var(--char-index)));

    text-shadow: 0 3vh 4vh rgba(0, 0, 0, 0.03);

    /* 첫 글자만 특별 애니메이션 */
    &:first-child {
        animation-name: first-char-transform;
        animation-duration: calc(var(--duration) * 2);
        animation-delay: 0s;
    }
}

/* ------------------------------
   Keyframes
------------------------------ */

/* 일반 글자 (아래에서 위로 튀어오르기) */
@keyframes char-transform {
    0% {
        opacity: 0;
        transform: translateY(50%);
    }
    70% {
        transform: translateY(-6%);
    }
    90% {
        transform: translateY(1%);
    }
    100% {
        opacity: 1;
        transform: translateY(0%);
    }
}

/* 글자 회전 */
@keyframes char-rotate {
    0% {
        transform: rotate(30deg);
    }
    30% {
        transform: rotate(-10deg);
    }
    100% {
        transform: rotate(0deg);
    }
}

/* 첫 글자만 특별 이동 */
@keyframes first-char-transform {
    0% {
        transform: translateX(calc(0.75ch * var(--char-total))) translateY(200%);
    }
    40% {
        transform: translateX(calc(0.75ch * var(--char-total))) translateY(-10%);
    }
    60% {
        transform: translateX(calc(0.75ch * var(--char-total))) translateY(7%);
    }
    100% {
        transform: none;
    }
}

/* 첫 글자 회전 */
@keyframes first-char-rotate {
    0% {
        transform: rotate(0.5turn);
    }
    40% {
        transform: rotate(-0.1turn);
    }
    70% {
        transform: rotate(0.1turn);
    }
    100% {
        transform: rotate(0turn);
    }
}

/* === “호강” 위 점 두 개 === */
#grooming_visual {
    .headline {
        .color {
            display: inline-block;
            position: relative;
            &::before,
            &::after {
                content: '';
                position: absolute;
                top: -0.3em; /* 텍스트 위쪽 높이 */
                width: 0.2em; /* 점 크기 */
                height: 0.2em;
                border-radius: 50%;
                background: #4a9f99;
                opacity: 0;
                transform: translateY(0);
                pointer-events: none;
            }

            &::before {
                left: 0.35em;
            }
            &::after {
                left: 1.25em;
            }

            &.show-dots::before,
            &.show-dots::after {
                opacity: 1;
                animation: hogang-dot-bounce 1.2s ease-in-out infinite;
            }

            &.show-dots::before {
                animation-delay: 0.05s;
            }
            &.show-dots::after {
                animation-delay: 0.25s;
            }
        }
    }
}

/* 통통 튀는 모션 */
@keyframes hogang-dot-bounce {
    0%,
    100% {
        transform: translateY(0) scale(1);
    }
    35% {
        transform: translateY(-0.35em) scale(1.05);
    }
    55% {
        transform: translateY(0) scale(0.98);
    }
}

@media screen and (max-width: 600px) {
    #grooming_visual {
        width: 100vw;
        height: 163.0769vw;
        background: url('/grooming/MainVisualMobile.png') no-repeat center/cover;
        display: flex;
        flex-direction: column;
        gap: 4.1026vw;
        align-items: center;
        .headline {
            padding-top: 36.4103vw;
            font-size: 10.2564vw;
            width: 100%;
            position: static;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .sub {
            position: static;
            width: 72.3077vw;
            height: 6.1538vw;
            font-size: 3.5897vw;
        }
    }
}
