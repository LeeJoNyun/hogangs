import gsap from "gsap";
import { ScrollTrigger } from "gsap/all";
import { useLayoutEffect, useRef } from "react";
import { useEffect } from "react";

gsap.registerPlugin(ScrollTrigger);

const CareService = () => {
  const cardRef = useRef(null);

  useLayoutEffect(() => {
    const ctx = gsap.context(() => {
      const items = gsap.utils.toArray(cardRef.current.querySelectorAll("li"));

      // 초기 상태
      gsap.set(items, { y: 60, opacity: 0, willChange: "transform" });

      // 뷰포트에 들어온 카드들만 "순차"로 등장
      ScrollTrigger.batch(items, {
        // markers: true,
        start: "top 85%",
        end: "bottom 70%",
        onEnter: (batch) =>
          gsap.to(batch, {
            y: 0,
            opacity: 1,
            ease: "power3.out",
            duration: 1.2, // 느긋하게
            stagger: 0.25, // 순차 간격
            overwrite: true,
          }),
        onEnterBack: (batch) =>
          gsap.to(batch, {
            y: 0,
            opacity: 1,
            ease: "power3.out",
            duration: 1.0,
            stagger: 0.15,
            overwrite: true,
          }),
        onLeaveBack: (batch) =>
          gsap.to(batch, {
            y: 60,
            opacity: 0,
            duration: 0.5,
            stagger: 0.1,
            overwrite: true,
          }),
        // interval: 0.1,   // (옵션) 배치 모으는 주기
        // batchMax: 3,     // (옵션) 한 번에 처리할 최대 카드 수
      });
    }, cardRef);

    return () => ctx.revert();
  }, []);
  return (
    <section id="hotel_careService">
      <div className="inner">
        <div className="left">
          <div className="top">
            <p>호강스는</p>
            <p>마음까지 케어해요</p>
          </div>
          <div className="bottom">
            <p>단순히 예쁘게 만드는 것에서 끝나지 않아요.</p>
            <p>아이의 행복과 안전을 가장 먼저 생각합니다</p>
          </div>
        </div>
        <div className="right">
          <ul className="cards" ref={cardRef}>
            <li>
              <div className="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="81"
                  height="81"
                  viewBox="0 0 81 81"
                  fill="none"
                >
                  <path
                    d="M67.168 27.168V47.168C67.168 54.2404 64.3585 61.0232 59.3575 66.0242C54.3565 71.0251 47.5737 73.8346 40.5013 73.8346C33.4289 73.8346 26.6461 71.0251 21.6451 66.0242C16.6442 61.0232 13.8346 54.2404 13.8346 47.168V27.168H67.168ZM40.5013 33.8346C37.0656 33.8348 33.7626 35.1612 31.281 37.5372C28.7994 39.9133 27.3308 43.1555 27.1813 46.588L27.168 47.168C27.168 49.8051 27.95 52.3829 29.415 54.5756C30.8801 56.7682 32.9625 58.4772 35.3989 59.4864C37.8352 60.4955 40.5161 60.7596 43.1025 60.2451C45.6889 59.7306 48.0647 58.4608 49.9294 56.5961C51.7941 54.7314 53.064 52.3556 53.5784 49.7692C54.0929 47.1828 53.8289 44.5019 52.8197 42.0655C51.8105 39.6292 50.1016 37.5468 47.9089 36.0817C45.7163 34.6166 43.1384 33.8346 40.5013 33.8346ZM40.5346 43.8346C41.3842 43.8356 42.2014 44.1609 42.8192 44.7441C43.437 45.3274 43.8088 46.1245 43.8585 46.9726C43.9083 47.8208 43.6324 48.6559 43.0871 49.3074C42.5418 49.9589 41.7683 50.3776 40.9246 50.478L40.5013 50.5013C39.6517 50.5004 38.8345 50.175 38.2167 49.5918C37.599 49.0086 37.2272 48.2115 37.1774 47.3633C37.1276 46.5152 37.4036 45.68 37.9489 45.0285C38.4942 44.377 39.2677 43.9583 40.1113 43.858L40.5346 43.8346ZM7.16797 17.168V13.8346C7.16797 12.0665 7.87035 10.3708 9.12059 9.12059C10.3708 7.87035 12.0665 7.16797 13.8346 7.16797H67.168C68.9361 7.16797 70.6318 7.87035 71.882 9.12059C73.1323 10.3708 73.8346 12.0665 73.8346 13.8346V17.168C73.8346 18.9361 73.1323 20.6318 71.882 21.882C70.6318 23.1323 68.9361 23.8346 67.168 23.8346H13.8346C12.0665 23.8346 10.3708 23.1323 9.12059 21.882C7.87035 20.6318 7.16797 18.9361 7.16797 17.168Z"
                    fill="#4A9F99"
                  />
                </svg>
              </div>
              <strong>24시간 CCTV</strong>
              <p>앱으로 실시간 확인하며</p>
              <p>투명하고 안전하게 지켜드립니다.</p>
            </li>
            <li>
              <div className="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="81"
                  height="81"
                  viewBox="0 0 81 81"
                  fill="none"
                >
                  <g clipPath="url(#clip0_2278_6894)">
                    <path
                      d="M42.0982 26.2169L33.0316 12.0182C32.5008 11.0003 32.741 9.77098 33.6303 9.19565C34.6473 8.66151 35.7958 8.91118 36.3674 9.79431L45.434 24.0785C45.9648 25.0964 45.7249 26.3262 44.8354 26.9012C43.821 27.3901 42.5781 27.0585 42.0982 26.2169ZM80.1608 28.8684C81.6192 31.5123 78.0043 33.6799 76.3118 34.5992C74.8293 34.4848 73.418 34.328 72.0778 34.1288C70.7378 33.9292 69.5546 33.7439 68.5282 33.5728C67.3307 33.3447 66.2188 33.1166 65.1924 32.8884C65.0763 33.4588 64.9195 34.0575 64.7219 34.6846C64.5212 35.3118 64.2789 35.9676 63.9949 36.6519C58.1642 35.3905 51.2975 31.9784 48.0856 26.73L59.0339 15.5251L61.0012 8.42578L65.1924 13.5578C68.0837 14.3706 72.095 14.4277 73.3182 17.4068C74.3774 19.1914 74.2916 22.9759 75.4564 24.4206C76.0837 25.0478 76.768 25.6181 77.5093 26.1313C78.6213 26.9012 79.1344 27.557 80.1608 28.8684ZM39.1045 52.647C36.5133 52.6286 33.8091 51.7296 31.2354 51.7061C29.7529 51.5351 29.2111 52.1909 29.6102 53.6734L33.2027 68.1286C33.1544 70.4506 31.893 72.2288 30.038 72.5337C28.2327 72.7072 26.4172 71.0786 26.0178 69.8393L21.399 51.7061C21.2849 51.0789 20.9285 50.7796 20.3298 50.808C19.4316 50.8508 19.3462 51.1359 19.175 51.7061L14.8984 69.7539C14.3345 71.4475 12.9678 72.556 11.306 72.5764C8.85263 72.5334 7.15863 70.2546 7.62803 68.1286L12.8456 46.7452L13.2733 33.8296C8.75089 32.6822 3.03596 29.5884 0.78536 25.2761C0.150493 23.8822 0.610626 22.5302 1.81176 21.8548C3.23149 21.206 4.83736 21.8306 5.40416 22.7956C7.61863 26.2616 12.5072 28.4704 15.8393 28.5264H41.3283C39.7514 36.4367 38.8689 44.3473 39.1045 52.647ZM45.3485 29.9804C49.6662 35.5952 55.8885 39.1138 62.5408 40.5011C61.9217 42.3545 61.0947 44.1578 60.5308 45.847C60.2742 46.6168 60.3455 47.743 60.7446 49.2256C62.3837 55.505 64.186 62.2092 65.7912 68.0431C66.4163 72.9297 59.6298 72.8256 58.6063 69.8393L54.9284 55.8117C53.9134 54.089 51.3754 53.687 50.8227 55.8117L47.4869 69.7538C45.7606 74.0586 39.6015 71.1643 40.3022 68.1286L43.4668 55.1274C43.5239 54.6711 43.4954 54.215 43.3814 53.759C43.4364 45.8373 43.6892 37.7326 45.3485 29.9804Z"
                      fill="#4A9F99"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_2278_6894">
                      <rect
                        width="80"
                        height="80"
                        fill="white"
                        transform="translate(0.5 0.5)"
                      />
                    </clipPath>
                  </defs>
                </svg>
              </div>
              <strong>산책 서비스</strong>
              <p>매니저와 하루 두 번 산책,</p>
              <p>비 오는 날엔 실내 놀이로 대체돼요!</p>
            </li>
            <li>
              <div className="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="81"
                  height="81"
                  viewBox="0 0 81 81"
                  fill="none"
                >
                  <path
                    d="M73.3944 11.8797C70.0762 11.8287 65.7595 14.3053 61.3997 17.4009C52.7317 19.7498 30.5864 19.5564 21.6548 17.3887C16.2898 16.0989 13.6225 12.38 10.9927 12.3856C8.81 12.4064 6.21609 13.4086 5.57906 15.4942C5.37172 17.4959 5.94437 18.2767 6.99172 19.6592C5.9739 21.2748 4.90078 23.6666 5.34218 25.3873C5.66656 26.5545 6.50109 27.4012 7.85781 27.8951C10.5712 28.8834 17.8625 27.023 19.6178 24.18L62.6625 23.1441C66.812 27.4341 72.9437 27.0901 75.4006 25.5148C76.6289 24.7273 77.3544 23.7387 77.3922 22.8319C77.4734 20.873 76.4366 20.3366 75.0987 19.1691C76.2828 18.1058 78.6308 16.0928 77.8667 14.6881C76.8026 12.7319 75.2558 11.9081 73.3944 11.8797ZM40.5016 43.3106C32.3034 43.3106 24.8778 44.0706 19.5992 45.2666C16.9598 45.8645 14.8533 46.5828 13.5231 47.2953C12.8581 47.6516 12.3948 48.0081 12.1547 48.2741C11.9145 48.54 11.9078 48.6514 11.9078 48.7012C11.9078 48.7512 11.9145 48.8626 12.1547 49.1284C12.3948 49.3942 12.8581 49.7509 13.5231 50.1072C14.8533 50.8197 16.9598 51.538 19.5992 52.1359C20.3527 52.3067 21.1544 52.4673 21.9914 52.6194C22.6696 52.0294 24.9085 51.4912 28.3034 51.1022C31.6982 50.7131 36.025 50.4989 40.5016 50.4981C44.9781 50.4986 49.3056 50.7125 52.702 51.1014C56.0983 51.4902 58.3393 52.0282 59.0197 52.6181C59.8537 52.4666 60.6528 52.3062 61.4041 52.1359C64.0431 51.538 66.1498 50.8197 67.48 50.1072C68.145 49.7509 68.6083 49.3944 68.8484 49.1284C69.0886 48.8625 69.0953 48.7511 69.0953 48.7012C69.0953 48.6512 69.0886 48.5398 68.8484 48.2741C68.6083 48.0083 68.145 47.6516 67.48 47.2953C66.1498 46.5828 64.0433 45.8645 61.4039 45.2666C56.1253 44.0706 48.6997 43.3106 40.5016 43.3106ZM10.6611 51.5781L4.31297 68.5062L4.30703 68.5203C4.12218 68.9826 4.1464 69.1992 4.32906 69.5594C4.51172 69.9195 4.965 70.4133 5.75031 70.9144C7.32062 71.9167 10.1037 72.8923 13.6128 73.6551C20.6308 75.1809 30.575 75.9669 40.5016 75.9669C50.4283 75.9669 60.3723 75.1809 67.3903 73.6551C70.8992 72.8923 73.6825 71.9167 75.2528 70.9145C76.038 70.4133 76.4914 69.9197 76.6741 69.5594C76.8567 69.1991 76.8809 68.9826 76.6959 68.5203L76.6901 68.5062L70.3422 51.5781C69.897 51.9491 69.385 52.2775 68.8081 52.5864C67.102 53.5003 64.8153 54.2469 62.0256 54.8789C56.4464 56.143 48.8719 56.9044 40.5016 56.9044C32.1312 56.9044 24.5567 56.143 18.9775 54.8789C16.1878 54.2469 13.9009 53.5003 12.195 52.5864C11.6183 52.2775 11.1062 51.9489 10.6611 51.5781Z"
                    fill="#4A9F99"
                  />
                </svg>
              </div>
              <strong>식사 안내</strong>
              <p>평소 먹던 사료와 간식을</p>
              <p>가져오시면 더 편안하게 지낼 수 있어요</p>
            </li>
          </ul>
        </div>
      </div>
    </section>
  );
};

export default CareService;
