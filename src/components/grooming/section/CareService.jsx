import gsap from "gsap";
import { ScrollTrigger } from "gsap/all";
import { useLayoutEffect, useRef } from "react";
import { useEffect } from "react";

gsap.registerPlugin(ScrollTrigger);

const CareService = () => {
  const cardRef = useRef(null);

  useLayoutEffect(() => {
    const ctx = gsap.context(() => {
      const items = gsap.utils.toArray(cardRef.current.querySelectorAll("li"));

      // 초기 상태
      gsap.set(items, { y: 60, opacity: 0, willChange: "transform" });

      // 뷰포트에 들어온 카드들만 "순차"로 등장
      ScrollTrigger.batch(items, {
        // markers: true,
        start: "top 85%",
        end: "bottom 70%",
        onEnter: (batch) =>
          gsap.to(batch, {
            y: 0,
            opacity: 1,
            ease: "power3.out",
            duration: 1.2, // 느긋하게
            stagger: 0.25, // 순차 간격
            overwrite: true,
          }),
        onEnterBack: (batch) =>
          gsap.to(batch, {
            y: 0,
            opacity: 1,
            ease: "power3.out",
            duration: 1.0,
            stagger: 0.15,
            overwrite: true,
          }),
        onLeaveBack: (batch) =>
          gsap.to(batch, {
            y: 60,
            opacity: 0,
            duration: 0.5,
            stagger: 0.1,
            overwrite: true,
          }),
        // interval: 0.1,   // (옵션) 배치 모으는 주기
        // batchMax: 3,     // (옵션) 한 번에 처리할 최대 카드 수
      });
    }, cardRef);

    return () => ctx.revert();
  }, []);
  return (
    <section id="grooming_careService">
      <div className="inner">
        <div className="left">
          <div className="top">
            <p>호강스는</p>
            <p>마음까지 케어해요</p>
          </div>
          <div className="bottom">
            <p>우리는 단순히 돌보는 것에 그치지 않아요.</p>
            <p>반려견이 집처럼 편안하고 행복하게 지낼 수 있도록</p>
            <p>섬세하고 따뜻하게 케어합니다.</p>
          </div>
        </div>
        <div className="right">
          <ul className="cards" ref={cardRef}>
            <li>
              <div className="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="80"
                  height="74"
                  viewBox="0 0 80 74"
                  fill="none"
                >
                  <path
                    d="M60.8371 69.2132H70.8371C72.6052 69.2132 74.3009 68.5108 75.5511 67.2606C76.8014 66.0103 77.5037 64.3147 77.5037 62.5465V29.2132C77.5037 27.4451 76.8014 25.7494 75.5511 24.4992C74.3009 23.2489 72.6052 22.5465 70.8371 22.5465H57.5037C55.7356 22.5465 54.0399 23.2489 52.7897 24.4992C51.5394 25.7494 50.8371 27.4451 50.8371 29.2132V49.2132M70.8371 22.5465H57.5037V15.1265C57.5037 14.7873 57.5706 14.4514 57.7004 14.1379C57.8302 13.8245 58.0205 13.5397 58.2604 13.2999C58.5003 13.06 58.785 12.8697 59.0985 12.7399C59.4119 12.61 59.7478 12.5432 60.0871 12.5432H68.2537C68.593 12.5432 68.9289 12.61 69.2423 12.7399C69.5558 12.8697 69.8405 13.06 70.0804 13.2999C70.3203 13.5397 70.5106 13.8245 70.6404 14.1379C70.7702 14.4514 70.8371 14.7873 70.8371 15.1265V22.5465ZM77.5037 35.8799H50.8371H77.5037ZM77.5037 55.8799H60.8371H77.5037ZM2.49707 59.7865L12.2871 67.6199C15.3897 70.1013 19.2442 71.4531 23.2171 71.4532H43.3337C44.0998 71.4532 44.8583 71.3023 45.5661 71.0092C46.2738 70.716 46.9169 70.2863 47.4585 69.7447C48.0002 69.203 48.4299 68.5599 48.723 67.8522C49.0162 67.1445 49.1671 66.3859 49.1671 65.6199C49.1671 64.8538 49.0162 64.0953 48.723 63.3876C48.4299 62.6798 48.0002 62.0368 47.4585 61.4951C46.9169 60.9534 46.2738 60.5237 45.5661 60.2306C44.8583 59.9374 44.0998 59.7865 43.3337 59.7865H28.2604"
                    fill="#4A9F99"
                  />
                  <path
                    d="M60.8371 69.2132H70.8371C72.6052 69.2132 74.3009 68.5108 75.5511 67.2606C76.8014 66.0103 77.5037 64.3147 77.5037 62.5465V29.2132C77.5037 27.4451 76.8014 25.7494 75.5511 24.4992C74.3009 23.2489 72.6052 22.5465 70.8371 22.5465M70.8371 22.5465H57.5037M70.8371 22.5465V15.1265C70.8371 14.7873 70.7702 14.4514 70.6404 14.1379C70.5106 13.8245 70.3203 13.5397 70.0804 13.2999C69.8405 13.06 69.5558 12.8697 69.2423 12.7399C68.9289 12.61 68.593 12.5432 68.2537 12.5432H60.0871C59.7478 12.5432 59.4119 12.61 59.0985 12.7399C58.785 12.8697 58.5003 13.06 58.2604 13.2999C58.0205 13.5397 57.8302 13.8245 57.7004 14.1379C57.5706 14.4514 57.5037 14.7873 57.5037 15.1265V22.5465M57.5037 22.5465C55.7356 22.5465 54.0399 23.2489 52.7897 24.4992C51.5394 25.7494 50.8371 27.4451 50.8371 29.2132V49.2132M77.5037 35.8799H50.8371M77.5037 55.8799H60.8371M2.49707 59.7865L12.2871 67.6199C15.3897 70.1013 19.2442 71.4531 23.2171 71.4532H43.3337C44.0998 71.4532 44.8583 71.3023 45.5661 71.0092C46.2738 70.716 46.9169 70.2863 47.4585 69.7447C48.0002 69.203 48.4299 68.5599 48.723 67.8522C49.0162 67.1445 49.1671 66.3859 49.1671 65.6199C49.1671 64.8538 49.0162 64.0953 48.723 63.3876C48.4299 62.6798 48.0002 62.0368 47.4585 61.4951C46.9169 60.9534 46.2738 60.5237 45.5661 60.2306C44.8583 59.9374 44.0998 59.7865 43.3337 59.7865H28.2604"
                    stroke="#4A9F99"
                    strokeWidth="5"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                  <path
                    d="M3.02734 42.2866H14.694C18.1507 42.2866 21.5307 43.3133 24.4073 45.23L31.074 49.6733C31.7059 50.0524 32.2543 50.5559 32.6858 51.1533C33.1174 51.7506 33.4232 52.4294 33.5846 53.1484C33.746 53.8675 33.7598 54.6118 33.6251 55.3363C33.4903 56.0608 33.2098 56.7504 32.8007 57.3633C32.0644 58.4667 30.9507 59.2635 29.6686 59.6042C28.3865 59.9448 27.0242 59.8058 25.8373 59.2133L17.0807 53.9533M64.1707 2.54663V12.5466M44.1707 9.2133L45.6607 6.22996C46.2147 5.12287 47.066 4.1919 48.1192 3.54135C49.1725 2.8908 50.386 2.54636 51.624 2.54663H74.1707M40.8373 27.5466C40.8373 29.7568 39.9594 31.8764 38.3966 33.4392C36.8338 35.002 34.7141 35.88 32.504 35.88C30.2939 35.88 28.1743 35.002 26.6115 33.4392C25.0486 31.8764 24.1707 29.7568 24.1707 27.5466C24.1707 21.2966 32.504 10.88 32.504 10.88C32.504 10.88 40.8373 21.2966 40.8373 27.5466Z"
                    stroke="#4A9F99"
                    strokeWidth="5"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                  />
                </svg>
              </div>
              <strong>프리미엄 위생 관리</strong>
              <p>전용 소독 시스템과</p>
              <p>청결 관리로 안심할 수 있어요.</p>
            </li>
            <li>
              <div className="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="80"
                  height="80"
                  viewBox="0 0 80 80"
                  fill="none"
                >
                  <g clipPath="url(#clip0_2957_1949)">
                    <path
                      d="M49.1335 18.19C50.5325 18.6554 51.8035 19.4411 52.8452 20.4845C53.8869 21.5279 54.6705 22.8002 55.1335 24.2001L56.6268 28.7901C56.7486 29.1333 56.971 29.432 57.2649 29.6471C57.5589 29.8622 57.9108 29.9838 58.2749 29.996C58.6389 30.0082 58.9982 29.9105 59.3059 29.7156C59.6137 29.5208 59.8556 29.2377 60.0002 28.9034L60.0035 28.8934L60.0435 28.8234L60.2068 28.3201L60.2035 28.3034L61.5368 24.2034C61.9635 22.92 62.6568 21.7467 63.5735 20.76L63.6168 20.7367C64.2761 20.0392 65.0355 19.4438 65.8702 18.97L65.8568 18.9534C66.3902 18.6534 66.9479 18.4067 67.5302 18.2134L72.1235 16.72C72.4761 16.5945 72.7813 16.3629 72.9971 16.0571C73.2129 15.7512 73.3287 15.386 73.3287 15.0117C73.3287 14.6374 73.2129 14.2722 72.9971 13.9664C72.7813 13.6605 72.4761 13.4289 72.1235 13.3034L72.0302 13.2801L67.4368 11.7867C66.0415 11.3228 64.7735 10.5403 63.7332 9.50116C62.6929 8.46202 61.9089 7.19483 61.4435 5.80005L59.9568 1.21005C59.8327 0.855096 59.6013 0.547516 59.2946 0.329891C58.9879 0.112266 58.6212 -0.00463867 58.2452 -0.00463867C57.8691 -0.00463867 57.5024 0.112266 57.1957 0.329891C56.8891 0.547516 56.6576 0.855096 56.5335 1.21005L55.0402 5.80005L55.0035 5.91338C54.5352 7.27252 53.7636 8.50716 52.7471 9.52365C51.7306 10.5401 50.496 11.3118 49.1368 11.78L44.5468 13.2734C44.1903 13.3959 43.881 13.6268 43.662 13.9336C43.443 14.2405 43.3253 14.6081 43.3253 14.9851C43.3253 15.362 43.443 15.7296 43.662 16.0365C43.881 16.3433 44.1903 16.5742 44.5468 16.6967L49.1335 18.19ZM79.2768 34.0434L76.7235 33.2167C75.9487 32.9577 75.2448 32.522 74.6674 31.944C74.0901 31.3661 73.6551 30.6618 73.3968 29.8867L72.5635 27.34C72.4945 27.1432 72.366 26.9726 72.1958 26.8519C72.0256 26.7312 71.8221 26.6664 71.6135 26.6664C71.4049 26.6664 71.2014 26.7312 71.0312 26.8519C70.861 26.9726 70.7325 27.1432 70.6635 27.34L69.8368 29.8867C69.5833 30.6568 69.1554 31.3579 68.5865 31.9355C68.0176 32.5131 67.323 32.9516 66.5568 33.2167L66.2368 33.3167H66.2235L64.0002 34.0401C63.8022 34.1084 63.6308 34.2373 63.51 34.4083C63.3892 34.5793 63.3251 34.784 63.3268 34.9934C63.3263 35.203 63.3916 35.4075 63.5137 35.578C63.6357 35.7485 63.8082 35.8763 64.0068 35.9434L66.5502 36.7701C67.6897 37.1482 68.6659 37.9045 69.3168 38.9134C69.5524 39.2823 69.7413 39.6789 69.8835 40.1034L70.7135 42.6534C70.7812 42.8539 70.9107 43.0278 71.0835 43.15C71.2108 43.2404 71.3574 43.2999 71.5117 43.3239C71.666 43.3478 71.8238 43.3355 71.9725 43.288C72.1213 43.2405 72.2569 43.159 72.3687 43.05C72.4806 42.941 72.5655 42.8075 72.6168 42.66L73.4468 40.1134C73.7054 39.338 74.1409 38.6334 74.7189 38.0555C75.2969 37.4775 76.0014 37.042 76.7768 36.7834L79.3268 35.9567C79.5237 35.8877 79.6943 35.7592 79.815 35.589C79.9357 35.4188 80.0005 35.2154 80.0005 35.0067C80.0005 34.7981 79.9357 34.5946 79.815 34.4244C79.6943 34.2542 79.5237 34.1257 79.3268 34.0567L79.2768 34.0434ZM40.0002 73.3367C56.1668 73.3367 69.6502 61.8267 72.6935 46.55C71.6335 46.8105 70.5143 46.6613 69.5595 46.1323C68.6047 45.6033 67.8848 44.7335 67.5435 43.6967L66.7168 41.1567C66.6255 40.8762 66.4701 40.6209 66.263 40.4109C66.0559 40.2008 65.8027 40.0419 65.5235 39.9467L62.8902 39.09C62.288 38.8784 61.7401 38.5362 61.2855 38.0882C60.8309 37.6401 60.4809 37.0972 60.2605 36.4982C60.0402 35.8991 59.9548 35.2588 60.0107 34.623C60.0665 33.9872 60.2621 33.3715 60.5835 32.82C59.9246 33.1393 59.2051 33.3145 58.4732 33.334C57.7412 33.3534 57.0135 33.2166 56.3386 32.9328C55.6636 32.6489 55.0569 32.2245 54.5588 31.6878C54.0608 31.151 53.6828 30.5143 53.4502 29.82L51.9602 25.2434C51.6659 24.3363 51.1597 23.5124 50.4835 22.84C49.815 22.1696 49.0004 21.6631 48.1035 21.3601L43.4368 19.8434C42.4261 19.4868 41.5519 18.8235 40.9362 17.9462C40.3205 17.0688 39.9942 16.0211 40.0026 14.9494C40.011 13.8776 40.3539 12.8352 40.9833 11.9676C41.6127 11.1001 42.4972 10.4507 43.5135 10.1101L48.0468 8.63672C48.5135 8.47449 48.9546 8.26116 49.3702 7.99672C46.3261 7.10887 43.171 6.6599 40.0002 6.66338C21.5868 6.66005 6.66016 21.5867 6.66016 39.9967C6.66016 58.41 21.5868 73.3367 40.0002 73.3367ZM24.6935 48.8601C25.2143 48.45 25.8766 48.2636 26.5348 48.3417C27.193 48.4198 27.7932 48.7561 28.2035 49.2767C29.6082 51.0616 31.3998 52.5041 33.4434 53.4956C35.4869 54.487 37.7288 55.0014 40.0002 55.0001C42.2683 55.0026 44.5073 54.4896 46.548 53.4998C48.5888 52.51 50.3779 51.0694 51.7802 49.2867C51.9837 49.0289 52.236 48.8137 52.5228 48.6534C52.8095 48.4931 53.125 48.3908 53.4512 48.3524C53.7775 48.314 54.1081 48.3403 54.4242 48.4297C54.7403 48.5191 55.0357 48.6698 55.2935 48.8734C55.5513 49.0769 55.7665 49.3293 55.9268 49.616C56.0871 49.9027 56.1894 50.2182 56.2278 50.5444C56.2662 50.8707 56.2399 51.2013 56.1505 51.5174C56.0611 51.8335 55.9104 52.1289 55.7068 52.3867C53.8361 54.7622 51.4503 56.6817 48.7295 58.0006C46.0086 59.3194 43.0238 60.0031 40.0002 60.0001C36.9721 60.0033 33.9829 59.3177 31.2589 57.9952C28.5348 56.6728 26.1473 54.7481 24.2768 52.3667C23.8668 51.8459 23.6803 51.1837 23.7585 50.5255C23.8366 49.8672 24.1729 49.267 24.6935 48.8567M25.8368 33.3334C25.8144 32.7726 25.9054 32.2131 26.1046 31.6884C26.3037 31.1637 26.6067 30.6847 26.9955 30.28C27.3844 29.8753 27.8509 29.5533 28.3672 29.3334C28.8835 29.1135 29.439 29.0001 30.0002 29.0001C30.5614 29.0001 31.1168 29.1135 31.6331 29.3334C32.1494 29.5533 32.616 29.8753 33.0048 30.28C33.3936 30.6847 33.6966 31.1637 33.8958 31.6884C34.0949 32.2131 34.1859 32.7726 34.1635 33.3334C34.1204 34.4087 33.663 35.4257 32.8869 36.1714C32.1109 36.917 31.0764 37.3334 30.0002 37.3334C28.9239 37.3334 27.8895 36.917 27.1134 36.1714C26.3373 35.4257 25.8799 34.4087 25.8368 33.3334ZM45.8368 33.3334C45.8144 32.7726 45.9054 32.2131 46.1046 31.6884C46.3037 31.1637 46.6067 30.6847 46.9955 30.28C47.3844 29.8753 47.8509 29.5533 48.3672 29.3334C48.8835 29.1135 49.439 29.0001 50.0002 29.0001C50.5614 29.0001 51.1168 29.1135 51.6331 29.3334C52.1494 29.5533 52.616 29.8753 53.0048 30.28C53.3936 30.6847 53.6966 31.1637 53.8958 31.6884C54.0949 32.2131 54.1859 32.7726 54.1635 33.3334C54.1205 34.4087 53.663 35.4257 52.8869 36.1714C52.1109 36.917 51.0764 37.3334 50.0002 37.3334C48.9239 37.3334 47.8895 36.917 47.1134 36.1714C46.3373 35.4257 45.8799 34.4087 45.8368 33.3334Z"
                      fill="#4A9F99"
                    />
                  </g>
                  <defs>
                    <clipPath id="clip0_2957_1949">
                      <rect width="80" height="80" fill="white" />
                    </clipPath>
                  </defs>
                </svg>
              </div>
              <strong>스트레스 최소화</strong>
              <p>개별 케어 시스템으로 </p>
              <p>강아지가 편안하게 미용 받을 수 있어요</p>
            </li>
            <li>
              <div className="icon">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="80"
                  height="80"
                  viewBox="0 0 80 80"
                  fill="none"
                >
                  <path
                    d="M66.667 23.3334H50.0003V13.3334C50.0003 9.66675 47.0003 6.66675 43.3337 6.66675H36.667C33.0003 6.66675 30.0003 9.66675 30.0003 13.3334V23.3334H13.3337C9.66699 23.3334 6.66699 26.3334 6.66699 30.0001V66.6667C6.66699 70.3334 9.66699 73.3334 13.3337 73.3334H66.667C70.3337 73.3334 73.3337 70.3334 73.3337 66.6667V30.0001C73.3337 26.3334 70.3337 23.3334 66.667 23.3334ZM30.0003 40.0001C32.767 40.0001 35.0003 42.2334 35.0003 45.0001C35.0003 47.7667 32.767 50.0001 30.0003 50.0001C27.2337 50.0001 25.0003 47.7667 25.0003 45.0001C25.0003 42.2334 27.2337 40.0001 30.0003 40.0001ZM40.0003 60.0001H20.0003V58.5667C20.0003 56.5667 21.2003 54.7334 23.067 53.9334C25.2003 53.0001 27.5337 52.5001 30.0003 52.5001C32.467 52.5001 34.8003 53.0001 36.9337 53.9334C38.767 54.7334 40.0003 56.5334 40.0003 58.5667V60.0001ZM43.3337 30.0001H36.667V13.3334H43.3337V30.0001ZM57.5003 55.0001H49.167C47.8003 55.0001 46.667 53.8667 46.667 52.5001C46.667 51.1334 47.8003 50.0001 49.167 50.0001H57.5003C58.867 50.0001 60.0003 51.1334 60.0003 52.5001C60.0003 53.8667 58.867 55.0001 57.5003 55.0001ZM57.5003 45.0001H49.167C47.8003 45.0001 46.667 43.8667 46.667 42.5001C46.667 41.1334 47.8003 40.0001 49.167 40.0001H57.5003C58.867 40.0001 60.0003 41.1334 60.0003 42.5001C60.0003 43.8667 58.867 45.0001 57.5003 45.0001Z"
                    fill="#4A9F99"
                  />
                </svg>
              </div>
              <strong>전문 미용사 전담</strong>
              <p>경험 많은 전문 미용사가</p>
              <p>스타일과 건강을 책임집니다.</p>
            </li>
          </ul>
        </div>
      </div>
    </section>
  );
};

export default CareService;
